// AI farming response generator (offline-capable, full multilingual)
import type { Language } from "./i18n";
import { t } from "./i18n";

interface FarmingResponse {
  text: string;
  intent?: string;
}

const responses: Record<string, Record<Language, string>> = {
  irrigation: {
    en: "For optimal irrigation, water your crops early morning (5‚Äì7 AM) or evening (5‚Äì7 PM) to minimize evaporation. Check soil moisture before watering ‚Äî it should be moist 2 inches deep.",
    hi: "‡§¨‡•á‡§π‡§§‡§∞ ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•Å‡§¨‡§π 5‚Äì7 ‡§¨‡§ú‡•á ‡§Ø‡§æ ‡§∂‡§æ‡§Æ 5‚Äì7 ‡§¨‡§ú‡•á ‡§™‡§æ‡§®‡•Ä ‡§¶‡•á‡§Ç‡•§ ‡§™‡§æ‡§®‡•Ä ‡§¶‡•á‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•Ä ‡§®‡§Æ‡•Ä ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç ‚Äî 2 ‡§á‡§Ç‡§ö ‡§ó‡§π‡§∞‡•Ä ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§®‡§Æ ‡§π‡•ã‡§®‡•Ä ‡§ö‡§æ‡§π‡§ø‡§è‡•§",
    te: "‡∞Æ‡∞Ç‡∞ö‡∞ø ‡∞®‡±Ä‡∞ü‡∞ø‡∞™‡∞æ‡∞∞‡±Å‡∞¶‡∞≤ ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞â‡∞¶‡∞Ø‡∞Ç 5‚Äì7 ‡∞ó‡∞Ç‡∞ü‡∞≤‡±Å ‡∞≤‡±á‡∞¶‡∞æ ‡∞∏‡∞æ‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞Ç 5‚Äì7 ‡∞ó‡∞Ç‡∞ü‡∞≤‡∞ï‡±Å ‡∞®‡±Ä‡∞≥‡±ç‡∞≤‡±Å ‡∞á‡∞µ‡±ç‡∞µ‡∞Ç‡∞°‡∞ø. ‡∞®‡±Ä‡∞≥‡±ç‡∞≤‡±Å ‡∞á‡∞µ‡±ç‡∞µ‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞Æ‡±Å‡∞Ç‡∞¶‡±Å ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø‡∞≤‡±ã ‡∞§‡±á‡∞Æ ‡∞ö‡±Ü‡∞ï‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø ‚Äî 2 ‡∞Ö‡∞Ç‡∞ó‡±Å‡∞≥‡∞æ‡∞≤ ‡∞≤‡±ã‡∞§‡±Å ‡∞§‡±á‡∞Æ‡∞ó‡∞æ ‡∞â‡∞Ç‡∞°‡∞æ‡∞≤‡∞ø.",
  },
  pesticide: {
    en: "Apply pesticides early morning or evening when winds are calm. Always wear protective gear and avoid spraying before rain. Use neem-based solutions for organic farming.",
    hi: "‡§ï‡•Ä‡§ü‡§®‡§æ‡§∂‡§ï ‡§∏‡•Å‡§¨‡§π ‡§ú‡§≤‡•ç‡§¶‡•Ä ‡§Ø‡§æ ‡§∂‡§æ‡§Æ ‡§ï‡•ã ‡§≤‡§ó‡§æ‡§è‡§Ç ‡§ú‡§¨ ‡§π‡§µ‡§æ ‡§∂‡§æ‡§Ç‡§§ ‡§π‡•ã‡•§ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ‡§§‡•ç‡§Æ‡§ï ‡§ó‡§ø‡§Ø‡§∞ ‡§™‡§π‡§®‡•á‡§Ç ‡§î‡§∞ ‡§¨‡§æ‡§∞‡§ø‡§∂ ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§õ‡§ø‡§°‡§º‡§ï‡§æ‡§µ ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§ú‡•à‡§µ‡§ø‡§ï ‡§ñ‡•á‡§§‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡•Ä‡§Æ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§ò‡•ã‡§≤ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§",
    te: "‡∞™‡±Å‡∞∞‡±Å‡∞ó‡±Å‡∞Æ‡∞Ç‡∞¶‡±Å ‡∞™‡±ä‡∞¶‡±ç‡∞¶‡±Å‡∞ü‡±á ‡∞≤‡±á‡∞¶‡∞æ ‡∞∏‡∞æ‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞Ç ‡∞µ‡∞æ‡∞°‡∞Ç‡∞°‡∞ø. ‡∞∞‡∞ï‡±ç‡∞∑‡∞£ ‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞æ‡∞≤‡±Å ‡∞ß‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø. ‡∞µ‡∞∞‡±ç‡∞∑‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞Æ‡±Å‡∞Ç‡∞¶‡±Å ‡∞™‡∞ø‡∞ö‡∞ø‡∞ï‡∞æ‡∞∞‡±Ä ‡∞ö‡±á‡∞Ø‡∞µ‡∞¶‡±ç‡∞¶‡±Å. ‡∞∏‡±á‡∞Ç‡∞¶‡±ç‡∞∞‡±Ä‡∞Ø ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞µ‡±á‡∞™ ‡∞Ü‡∞ß‡∞æ‡∞∞‡∞ø‡∞§ ‡∞¶‡±ç‡∞∞‡∞æ‡∞µ‡∞£‡∞Ç ‡∞µ‡∞æ‡∞°‡∞Ç‡∞°‡∞ø.",
  },
  weather: {
    en: "Based on current conditions, the weather looks favorable for farming. Keep monitoring for sudden changes and protect your crops from extreme conditions.",
    hi: "‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞, ‡§Æ‡•å‡§∏‡§Æ ‡§ñ‡•á‡§§‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤ ‡§≤‡§ó ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§Ö‡§ö‡§æ‡§®‡§ï ‡§¨‡§¶‡§≤‡§æ‡§µ‡•ã‡§Ç ‡§™‡§∞ ‡§®‡§ú‡§∞ ‡§∞‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•Ä ‡§´‡§∏‡§≤‡•ã‡§Ç ‡§ï‡•ã ‡§ö‡§∞‡§Æ ‡§™‡§∞‡§ø‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§∏‡•á ‡§¨‡§ö‡§æ‡§è‡§Ç‡•§",
    te: "‡∞™‡±ç‡∞∞‡∞∏‡±ç‡∞§‡±Å‡∞§ ‡∞™‡∞∞‡∞ø‡∞∏‡±ç‡∞•‡∞ø‡∞§‡±Å‡∞≤ ‡∞Ü‡∞ß‡∞æ‡∞∞‡∞Ç‡∞ó‡∞æ, ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞Ö‡∞®‡±Å‡∞ï‡±Ç‡∞≤‡∞Ç‡∞ó‡∞æ ‡∞â‡∞Ç‡∞¶‡∞ø. ‡∞Ö‡∞ï‡∞∏‡±ç‡∞Æ‡∞æ‡∞§‡±ç‡∞§‡±Å ‡∞Æ‡∞æ‡∞∞‡±ç‡∞™‡±Å‡∞≤‡∞®‡±Å ‡∞ó‡∞Æ‡∞®‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞§‡±Ä‡∞µ‡±ç‡∞∞‡∞Æ‡±à‡∞® ‡∞™‡∞∞‡∞ø‡∞∏‡±ç‡∞•‡∞ø‡∞§‡±Å‡∞≤ ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞™‡∞Ç‡∞ü‡∞≤‡∞®‡±Å ‡∞∞‡∞ï‡±ç‡∞∑‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.",
  },
  fertilizer: {
    en: "Apply fertilizers based on soil testing results. Generally, use NPK fertilizer at the rate of 100:50:50 kg/hectare for most crops. Apply in the evening to avoid burning.",
    hi: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§°‡§æ‡§≤‡•á‡§Ç‡•§ ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§Ç‡§∂ ‡§´‡§∏‡§≤‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è 100:50:50 ‡§ï‡§ø‡§ó‡•ç‡§∞‡§æ/‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞ NPK ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§ú‡§≤‡§® ‡§∏‡•á ‡§¨‡§ö‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∂‡§æ‡§Æ ‡§ï‡•ã ‡§°‡§æ‡§≤‡•á‡§Ç‡•§",
    te: "‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø ‡∞™‡∞∞‡±Ä‡∞ï‡±ç‡∞∑ ‡∞´‡∞≤‡∞ø‡∞§‡∞æ‡∞≤ ‡∞Ü‡∞ß‡∞æ‡∞∞‡∞Ç‡∞ó‡∞æ ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å ‡∞µ‡±á‡∞Ø‡∞Ç‡∞°‡∞ø. ‡∞ö‡∞æ‡∞≤‡∞æ ‡∞™‡∞Ç‡∞ü‡∞≤‡∞ï‡±Å 100:50:50 ‡∞ï‡∞ø‡∞≤‡±ã/‡∞π‡±Ü‡∞ï‡±ç‡∞ü‡∞æ‡∞∞‡±Å NPK ‡∞é‡∞∞‡±Å‡∞µ‡±Å ‡∞µ‡∞æ‡∞°‡∞Ç‡∞°‡∞ø. ‡∞ú‡±ç‡∞µ‡∞≤‡∞® ‡∞®‡∞ø‡∞µ‡∞æ‡∞∞‡∞£‡∞ï‡±Å ‡∞∏‡∞æ‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞Ç ‡∞µ‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.",
  },
  soil: {
    en: "Good soil health is key to good yields. Test your soil every 2 years. Add organic matter like compost to improve soil structure and water retention.",
    hi: "‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•Ä ‡§∏‡•á‡§π‡§§ ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§â‡§™‡§ú ‡§ï‡•Ä ‡§ö‡§æ‡§¨‡•Ä ‡§π‡•à‡•§ ‡§π‡§∞ 2 ‡§∏‡§æ‡§≤ ‡§Æ‡•á‡§Ç ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•Ä ‡§∏‡§Ç‡§∞‡§ö‡§®‡§æ ‡§î‡§∞ ‡§ú‡§≤ ‡§ß‡§æ‡§∞‡§£ ‡§ï‡•ç‡§∑‡§Æ‡§§‡§æ ‡§∏‡•Å‡§ß‡§æ‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ñ‡§æ‡§¶ ‡§ú‡•à‡§∏‡•á ‡§ï‡§æ‡§∞‡•ç‡§¨‡§®‡§ø‡§ï ‡§™‡§¶‡§æ‡§∞‡•ç‡§• ‡§Æ‡§ø‡§≤‡§æ‡§è‡§Ç‡•§",
    te: "‡∞Æ‡∞Ç‡∞ö‡∞ø ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø ‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø‡∞Ç ‡∞Æ‡∞Ç‡∞ö‡∞ø ‡∞¶‡∞ø‡∞ó‡±Å‡∞¨‡∞°‡∞ø‡∞ï‡∞ø ‡∞Æ‡±Å‡∞ñ‡±ç‡∞Ø‡∞Ç. ‡∞™‡±ç‡∞∞‡∞§‡∞ø 2 ‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞æ‡∞≤‡∞ï‡±Å ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø ‡∞™‡∞∞‡±Ä‡∞ï‡±ç‡∞∑ ‡∞ö‡±á‡∞Ø‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø. ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø ‡∞®‡∞ø‡∞∞‡±ç‡∞Æ‡∞æ‡∞£‡∞Ç ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞®‡±Ä‡∞ü‡∞ø ‡∞®‡∞ø‡∞≤‡±Å‡∞™‡±Å‡∞¶‡∞≤ ‡∞Æ‡±Ü‡∞∞‡±Å‡∞ó‡±Å‡∞™‡∞∞‡∞ö‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞ï‡∞Ç‡∞™‡±ã‡∞∏‡±ç‡∞ü‡±ç ‡∞≤‡∞æ‡∞Ç‡∞ü‡∞ø ‡∞∏‡±á‡∞Ç‡∞¶‡±ç‡∞∞‡±Ä‡∞Ø ‡∞™‡∞¶‡∞æ‡∞∞‡±ç‡∞•‡∞æ‡∞≤‡±Å ‡∞ï‡∞≤‡∞™‡∞Ç‡∞°‡∞ø.",
  },
  // Crop Doctor intents
  yellowLeaves: {
    en: "Yellow leaves can indicate nitrogen deficiency, waterlogging, or fungal infection. Apply urea fertilizer at 20kg/acre. Ensure proper drainage. If symptoms persist, use fungicide spray.",
    hi: "‡§™‡•Ä‡§≤‡•Ä ‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡§æ‡§Ç ‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§® ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä, ‡§ú‡§≤‡§ú‡§Æ‡§æ‡§µ ‡§Ø‡§æ ‡§´‡§Ç‡§ó‡§≤ ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§ï‡§æ ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§π‡•ã ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡§Ç‡•§ 20 ‡§ï‡§ø‡§ó‡•ç‡§∞‡§æ/‡§è‡§ï‡§°‡§º ‡§Ø‡•Ç‡§∞‡§ø‡§Ø‡§æ ‡§°‡§æ‡§≤‡•á‡§Ç‡•§ ‡§ú‡§≤ ‡§®‡§ø‡§ï‡§æ‡§∏‡•Ä ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§π‡§®‡•á ‡§™‡§∞ ‡§´‡§´‡•Ç‡§Ç‡§¶‡§®‡§æ‡§∂‡§ï ‡§∏‡•ç‡§™‡•ç‡§∞‡•á ‡§ï‡§∞‡•á‡§Ç‡•§",
    te: "‡∞™‡∞∏‡±Å‡∞™‡±Å ‡∞Ü‡∞ï‡±Å‡∞≤‡±Å ‡∞®‡∞§‡±ç‡∞∞‡∞ú‡∞®‡∞ø ‡∞≤‡±ã‡∞™‡∞Ç, ‡∞®‡±Ä‡∞ü‡∞ø ‡∞®‡∞ø‡∞≤‡±ç‡∞µ ‡∞≤‡±á‡∞¶‡∞æ ‡∞∂‡∞ø‡∞≤‡±Ä‡∞Ç‡∞¶‡±ç‡∞∞ ‡∞∏‡∞Ç‡∞ï‡±ç‡∞∞‡∞Æ‡∞£ ‡∞∏‡±Ç‡∞ö‡∞ø‡∞∏‡±ç‡∞§‡∞æ‡∞Ø‡∞ø. 20 ‡∞ï‡∞ø‡∞≤‡±ã/‡∞é‡∞ï‡∞∞‡∞Ç ‡∞Ø‡±Ç‡∞∞‡∞ø‡∞Ø‡∞æ ‡∞µ‡±á‡∞Ø‡∞Ç‡∞°‡∞ø. ‡∞∏‡∞∞‡±à‡∞® ‡∞®‡±Ä‡∞ü‡∞ø ‡∞™‡∞æ‡∞∞‡±Å‡∞¶‡∞≤ ‡∞®‡∞ø‡∞∞‡±ç‡∞ß‡∞æ‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø. ‡∞≤‡∞ï‡±ç‡∞∑‡∞£‡∞æ‡∞≤‡±Å ‡∞ï‡±ä‡∞®‡∞∏‡∞æ‡∞ó‡∞ø‡∞§‡±á ‡∞∂‡∞ø‡∞≤‡±Ä‡∞Ç‡∞¶‡±ç‡∞∞‡∞®‡∞æ‡∞∂‡∞ï ‡∞∏‡±ç‡∞™‡±ç‡∞∞‡±á ‡∞µ‡∞æ‡∞°‡∞Ç‡∞°‡∞ø.",
  },
  pestAttack: {
    en: "Pest attack detected! Apply neem oil spray (5ml per litre of water) in the early morning. For severe infestation, use recommended pesticide as per local agriculture officer guidance.",
    hi: "‡§ï‡•Ä‡§ü ‡§π‡§Æ‡§≤‡§æ! ‡§∏‡•Å‡§¨‡§π ‡§ú‡§≤‡•ç‡§¶‡•Ä ‡§®‡•Ä‡§Æ ‡§§‡•á‡§≤ ‡§∏‡•ç‡§™‡•ç‡§∞‡•á ‡§ï‡§∞‡•á‡§Ç (5 ‡§Æ‡§ø‡§≤‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø ‡§≤‡•Ä‡§ü‡§∞ ‡§™‡§æ‡§®‡•Ä)‡•§ ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§ï‡•É‡§∑‡§ø ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§Ö‡§®‡•Å‡§∂‡§Ç‡§∏‡§ø‡§§ ‡§ï‡•Ä‡§ü‡§®‡§æ‡§∂‡§ï ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§",
    te: "‡∞™‡±Å‡∞∞‡±Å‡∞ó‡±Å‡∞≤ ‡∞¶‡∞æ‡∞°‡∞ø! ‡∞§‡±ä‡∞≤‡∞ø ‡∞â‡∞¶‡∞Ø‡∞Ç ‡∞µ‡±á‡∞™‡∞®‡±Ç‡∞®‡±Ü ‡∞∏‡±ç‡∞™‡±ç‡∞∞‡±á ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø (5 ‡∞Æ‡∞ø.‡∞≤‡±Ä. ‡∞™‡±ç‡∞∞‡∞§‡∞ø ‡∞≤‡±Ä‡∞ü‡∞∞‡±Å‡∞ï‡±Å). ‡∞§‡±Ä‡∞µ‡±ç‡∞∞‡∞Æ‡±à‡∞® ‡∞∏‡∞Ç‡∞ï‡±ç‡∞∞‡∞Æ‡∞£‡∞ï‡±Å ‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞ø‡∞ï ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞Ö‡∞ß‡∞ø‡∞ï‡∞æ‡∞∞‡∞ø ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ó‡∞¶‡∞∞‡±ç‡∞∂‡∞ï‡∞§ ‡∞™‡±ç‡∞∞‡∞ï‡∞æ‡∞∞‡∞Ç ‡∞∏‡∞ø‡∞´‡∞æ‡∞∞‡±ç‡∞∏‡±Å ‡∞ö‡±á‡∞∏‡∞ø‡∞® ‡∞™‡±Å‡∞∞‡±Å‡∞ó‡±Å‡∞Æ‡∞Ç‡∞¶‡±Å ‡∞µ‡∞æ‡∞°‡∞Ç‡∞°‡∞ø.",
  },
  diseaseSpot: {
    en: "Leaf spots suggest fungal disease. Remove affected leaves immediately. Spray copper oxychloride (3g per litre). Avoid overhead irrigation.",
    hi: "‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§™‡§∞ ‡§ß‡§¨‡•ç‡§¨‡•á ‡§´‡§Ç‡§ó‡§≤ ‡§∞‡•ã‡§ó ‡§ï‡§æ ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§π‡•à‡•§ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡§æ‡§Ç ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§π‡§ü‡§æ‡§è‡§Ç‡•§ ‡§ï‡•â‡§™‡§∞ ‡§ë‡§ï‡•ç‡§∏‡•Ä‡§ï‡•ç‡§≤‡•ã‡§∞‡§æ‡§á‡§° (3 ‡§ó‡•ç‡§∞‡§æ‡§Æ/‡§≤‡•Ä‡§ü‡§∞) ‡§∏‡•ç‡§™‡•ç‡§∞‡•á ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§ä‡§™‡§∞ ‡§∏‡•á ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§∏‡•á ‡§¨‡§ö‡•á‡§Ç‡•§",
    te: "‡∞Ü‡∞ï‡±Å ‡∞Æ‡∞ö‡±ç‡∞ö‡∞≤‡±Å ‡∞∂‡∞ø‡∞≤‡±Ä‡∞Ç‡∞¶‡±ç‡∞∞ ‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡∞ø‡∞®‡∞ø ‡∞∏‡±Ç‡∞ö‡∞ø‡∞∏‡±ç‡∞§‡∞æ‡∞Ø‡∞ø. ‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡∞ø‡∞ó‡±ç‡∞∞‡∞∏‡±ç‡∞§ ‡∞Ü‡∞ï‡±Å‡∞≤‡±Å ‡∞µ‡±Ü‡∞Ç‡∞ü‡∞®‡±á ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø. ‡∞ï‡∞æ‡∞™‡∞∞‡±ç ‡∞Ü‡∞ï‡±ç‡∞∏‡±Ä‡∞ï‡±ç‡∞≤‡±ã‡∞∞‡±à‡∞°‡±ç (3 ‡∞ó‡±ç‡∞∞‡∞æ/‡∞≤‡±Ä‡∞ü‡∞∞‡±ç) ‡∞∏‡±ç‡∞™‡±ç‡∞∞‡±á ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø. ‡∞™‡±à‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞®‡±Ä‡∞≥‡±ç‡∞≤‡±Å ‡∞á‡∞µ‡±ç‡∞µ‡∞°‡∞Ç ‡∞Æ‡∞æ‡∞®‡∞Ç‡∞°‡∞ø.",
  },
  rootRot: {
    en: "Root rot is caused by excess moisture. Improve drainage, reduce watering. Apply Trichoderma viride to the soil. Ensure proper spacing between plants.",
    hi: "‡§ú‡§°‡§º ‡§∏‡§°‡§º‡§® ‡§Ö‡§ß‡§ø‡§ï ‡§®‡§Æ‡•Ä ‡§∏‡•á ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§ ‡§ú‡§≤ ‡§®‡§ø‡§ï‡§æ‡§∏‡•Ä ‡§∏‡•Å‡§ß‡§æ‡§∞‡•á‡§Ç, ‡§™‡§æ‡§®‡•Ä ‡§ï‡§Æ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§Æ‡•á‡§Ç ‡§ü‡•ç‡§∞‡§æ‡§á‡§ï‡•ã‡§°‡§∞‡•ç‡§Æ‡§æ ‡§µ‡§ø‡§∞‡§ø‡§°‡•á ‡§≤‡§ó‡§æ‡§è‡§Ç‡•§ ‡§™‡•å‡§ß‡•ã‡§Ç ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§â‡§ö‡§ø‡§§ ‡§¶‡•Ç‡§∞‡•Ä ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§",
    te: "‡∞µ‡±á‡∞∞‡±ç‡∞≤ ‡∞ï‡±Å‡∞≥‡±ç‡∞≥‡±Å ‡∞Ö‡∞ß‡∞ø‡∞ï ‡∞§‡±á‡∞Æ ‡∞µ‡∞≤‡±ç‡∞≤ ‡∞µ‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø. ‡∞®‡±Ä‡∞ü‡∞ø ‡∞™‡∞æ‡∞∞‡±Å‡∞¶‡∞≤ ‡∞Æ‡±Ü‡∞∞‡±Å‡∞ó‡±Å‡∞™‡∞∞‡∞ö‡∞Ç‡∞°‡∞ø, ‡∞®‡±Ä‡∞≥‡±ç‡∞≤‡±Å ‡∞§‡∞ó‡±ç‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø. ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø‡∞≤‡±ã ‡∞ü‡±ç‡∞∞‡±à‡∞ï‡±ã‡∞°‡±Ü‡∞∞‡±ç‡∞Æ‡∞æ ‡∞µ‡±à‡∞∞‡∞ø‡∞°‡±á ‡∞µ‡±á‡∞Ø‡∞Ç‡∞°‡∞ø. ‡∞Æ‡±ä‡∞ï‡±ç‡∞ï‡∞≤ ‡∞Æ‡∞ß‡±ç‡∞Ø ‡∞∏‡∞∞‡±à‡∞® ‡∞¶‡±Ç‡∞∞‡∞Ç ‡∞®‡∞ø‡∞∞‡±ç‡∞ß‡∞æ‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.",
  },
  // Emergency
  emergency: {
    en: "üö® Emergency mode activated! Stay calm. Check your crops and livestock. Call agriculture helpline: 1800-180-1551. Follow emergency guidance shown on screen.",
    hi: "üö® ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤ ‡§Æ‡•ã‡§° ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø! ‡§∂‡§æ‡§Ç‡§§ ‡§∞‡§π‡•á‡§Ç‡•§ ‡§Ö‡§™‡§®‡•Ä ‡§´‡§∏‡§≤‡•ã‡§Ç ‡§î‡§∞ ‡§™‡§∂‡•Å‡§ì‡§Ç ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§ï‡•É‡§∑‡§ø ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§® ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç: 1800-180-1551‡•§",
    te: "üö® ‡∞Ö‡∞§‡±ç‡∞Ø‡∞µ‡∞∏‡∞∞ ‡∞Æ‡±ã‡∞°‡±ç ‡∞∏‡∞ï‡±ç‡∞∞‡∞ø‡∞Ø‡∞Æ‡±à‡∞Ç‡∞¶‡∞ø! ‡∞∂‡∞æ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞â‡∞Ç‡∞°‡∞Ç‡∞°‡∞ø. ‡∞Æ‡±Ä ‡∞™‡∞Ç‡∞ü‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞™‡∞∂‡±Å‡∞µ‡±Å‡∞≤‡∞®‡±Å ‡∞ö‡±Ü‡∞ï‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø. ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞π‡±Ü‡∞≤‡±ç‡∞™‡±ç‚Äå‡∞≤‡±à‡∞®‡±ç ‡∞ï‡∞æ‡∞≤‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø: 1800-180-1551.",
  },
  // Reminder
  reminderConfirm: {
    en: "I'll help you set a reminder! Please go to the Reminders tab and add it there, or say the task and time clearly.",
    hi: "‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è ‡§∞‡§ø‡§Æ‡§æ‡§á‡§Ç‡§°‡§∞ ‡§∏‡•á‡§ü ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡•Ç‡§Ç‡§ó‡§æ! ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∞‡§ø‡§Æ‡§æ‡§á‡§Ç‡§°‡§∞ ‡§ü‡•à‡§¨ ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç ‡§î‡§∞ ‡§µ‡§π‡§æ‡§Ç ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§",
    te: "‡∞®‡±á‡∞®‡±Å ‡∞Æ‡±Ä‡∞ï‡±Å ‡∞∞‡∞ø‡∞Æ‡±à‡∞Ç‡∞°‡∞∞‡±ç ‡∞∏‡±Ü‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡∞π‡∞æ‡∞Ø‡∞Ç ‡∞ö‡±á‡∞∏‡±ç‡∞§‡∞æ‡∞®‡±Å! ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞∞‡∞ø‡∞Æ‡±à‡∞Ç‡∞°‡∞∞‡±ç ‡∞ü‡±ç‡∞Ø‡∞æ‡∞¨‡±ç‚Äå‡∞ï‡±Å ‡∞µ‡±Ü‡∞≥‡±ç‡∞≥‡∞ø ‡∞Ö‡∞ï‡±ç‡∞ï‡∞° ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.",
  },
  default: {
    en: "I understand you're asking about farming. Here are some tips: maintain crop rotation, monitor for pests regularly, and ensure adequate irrigation. For specific advice, please ask about a particular crop or issue.",
    hi: "‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù‡§§‡§æ ‡§π‡•Ç‡§Å ‡§Ü‡§™ ‡§ñ‡•á‡§§‡•Ä ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ ‡§ï‡•Å‡§õ ‡§∏‡•Å‡§ù‡§æ‡§µ: ‡§´‡§∏‡§≤ ‡§ö‡§ï‡•ç‡§∞ ‡§¨‡§®‡§æ‡§è ‡§∞‡§ñ‡•á‡§Ç, ‡§ï‡•Ä‡§ü‡•ã‡§Ç ‡§ï‡•Ä ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§ï‡§∞‡•á‡§Ç, ‡§î‡§∞ ‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§∏‡§≤‡§æ‡§π ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§ø‡§∏‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§´‡§∏‡§≤ ‡§Ø‡§æ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§",
    te: "‡∞Æ‡±Ä‡∞∞‡±Å ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø‡∞Ç ‡∞ó‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞Ö‡∞°‡±Å‡∞ó‡±Å‡∞§‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞∞‡∞®‡∞ø ‡∞Ö‡∞∞‡±ç‡∞•‡∞Æ‡±à‡∞Ç‡∞¶‡∞ø. ‡∞ï‡±ä‡∞®‡±ç‡∞®‡∞ø ‡∞ö‡∞ø‡∞ü‡±ç‡∞ï‡∞æ‡∞≤‡±Å: ‡∞™‡∞Ç‡∞ü ‡∞Æ‡∞æ‡∞∞‡±ç‡∞™‡∞ø‡∞°‡∞ø ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø, ‡∞ö‡±Ä‡∞°‡∞™‡±Ä‡∞°‡∞≤‡∞®‡±Å ‡∞ï‡±ç‡∞∞‡∞Æ‡∞Ç ‡∞§‡∞™‡±ç‡∞™‡∞ï‡±Å‡∞Ç‡∞°‡∞æ ‡∞™‡∞∞‡±ç‡∞Ø‡∞µ‡±á‡∞ï‡±ç‡∞∑‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø, ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞§‡∞ó‡∞ø‡∞®‡∞Ç‡∞§ ‡∞®‡±Ä‡∞ü‡∞ø‡∞™‡∞æ‡∞∞‡±Å‡∞¶‡∞≤ ‡∞®‡∞ø‡∞∞‡±ç‡∞ß‡∞æ‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.",
  },
};

function detectIntent(text: string): string {
  const lower = text.toLowerCase();

  // Emergency (highest priority)
  if (
    lower.includes("emergency") || lower.includes("sos") ||
    lower.includes("‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤") || lower.includes("‡§ñ‡§§‡§∞‡§æ") ||
    lower.includes("‡∞Ö‡∞§‡±ç‡∞Ø‡∞µ‡∞∏‡∞∞") || lower.includes("‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶‡∞Ç")
  ) return "emergency";

  // Crop disease / yellow leaves
  if (
    lower.includes("yellow") || lower.includes("‡§™‡•Ä‡§≤‡•Ä") || lower.includes("‡∞™‡∞∏‡±Å‡∞™‡±Å") ||
    lower.includes("yellowing") || lower.includes("pale")
  ) return "yellowLeaves";

  // Spots / disease
  if (
    lower.includes("spot") || lower.includes("‡§ß‡§¨‡•ç‡§¨‡•á") || lower.includes("‡∞Æ‡∞ö‡±ç‡∞ö") ||
    lower.includes("blight") || lower.includes("fungus") || lower.includes("disease") ||
    lower.includes("‡∞∞‡±ã‡∞ó‡∞Ç") || lower.includes("‡∞∞‡±ã‡∞ó")
  ) return "diseaseSpot";

  // Root rot
  if (
    lower.includes("root") || lower.includes("rot") || lower.includes("‡§ú‡§°‡§º") ||
    lower.includes("‡∞µ‡±á‡∞∞‡±Å") || lower.includes("‡∞ï‡±Å‡∞≥‡±ç‡∞≥‡±Å")
  ) return "rootRot";

  // Pest attack
  if (
    lower.includes("insect") || lower.includes("bug") || lower.includes("‡§ï‡•Ä‡§ü") ||
    lower.includes("‡∞™‡±Å‡∞∞‡±Å‡∞ó‡±Å") || lower.includes("‡∞™‡±Ä‡∞°") || lower.includes("worm") ||
    lower.includes("attack") || lower.includes("infestation")
  ) return "pestAttack";

  // Irrigation
  if (
    lower.includes("irri") || lower.includes("water") || lower.includes("‡§™‡§æ‡§®‡•Ä") ||
    lower.includes("‡∞∏‡∞ø‡∞Ç") || lower.includes("‡∞®‡±Ä‡∞ü‡∞ø") || lower.includes("‡∞®‡±Ä‡∞≥‡±ç‡∞≥") ||
    lower.includes("‡§®‡§Æ‡•Ä") || lower.includes("‡∞§‡±á‡∞Æ")
  ) return "irrigation";

  // Pesticide
  if (
    lower.includes("pest") || lower.includes("spray") || lower.includes("‡§õ‡§ø‡§°‡§º") ||
    lower.includes("‡∞™‡±Å‡∞∞‡±Å") || lower.includes("‡∞™‡∞ø‡∞ö‡∞ø‡∞ï‡∞æ‡∞∞‡±Ä") || lower.includes("neem") ||
    lower.includes("‡∞®‡±Ä‡∞Æ‡±ç")
  ) return "pesticide";

  // Weather
  if (
    lower.includes("weather") || lower.includes("rain") || lower.includes("‡§Æ‡•å‡§∏‡§Æ") ||
    lower.includes("‡§µ‡§∞‡•ç‡§∑‡§æ") || lower.includes("‡∞µ‡∞æ‡∞§") || lower.includes("‡∞µ‡∞∞‡±ç‡∞∑‡∞Ç") ||
    lower.includes("baarish") || lower.includes("‡§¨‡§æ‡§∞‡§ø‡§∂")
  ) return "weather";

  // Fertilizer
  if (
    lower.includes("fertil") || lower.includes("‡§â‡§∞‡•ç‡§µ") || lower.includes("‡§ñ‡§æ‡§¶") ||
    lower.includes("‡∞é‡∞∞‡±Å‡∞µ") || lower.includes("npk") || lower.includes("urea") ||
    lower.includes("‡§Ø‡•Ç‡§∞‡§ø‡§Ø‡§æ") || lower.includes("‡∞Ø‡±Ç‡∞∞‡∞ø‡∞Ø‡∞æ")
  ) return "fertilizer";

  // Soil
  if (
    lower.includes("soil") || lower.includes("‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä") || lower.includes("‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø") ||
    lower.includes("bhumi") || lower.includes("‡§≠‡•Ç‡§Æ‡§ø") || lower.includes("‡∞®‡±á‡∞≤")
  ) return "soil";

  // Reminder
  if (
    lower.includes("remind") || lower.includes("‡§∞‡§ø‡§Æ‡§æ‡§á‡§Ç‡§°‡§∞") || lower.includes("‡∞∞‡∞ø‡∞Æ‡±à‡∞Ç‡∞°‡∞∞‡±ç") ||
    lower.includes("‡§Ø‡§æ‡§¶") || lower.includes("‡∞ó‡±Å‡∞∞‡±ç‡∞§‡±Å")
  ) return "reminderConfirm";

  return "default";
}

export async function generateFarmingResponse(
  userText: string,
  language: Language
): Promise<FarmingResponse> {
  // Simulate network delay
  await new Promise((r) => setTimeout(r, 600 + Math.random() * 400));
  const intent = detectIntent(userText);
  return { text: responses[intent][language], intent };
}

export function isEmergency(userText: string): boolean {
  return detectIntent(userText) === "emergency";
}

export { t };
